import{_ as s,o as n,c as a,a as l}from"./app.303cfecc.js";const i=JSON.parse('{"title":"Spring \u7B2C\u4E09\u8BB2 BeanFactory \u540E\u7F6E\u5904\u7406\u5668","description":"","frontmatter":{},"headers":[{"level":2,"title":"BeanFactory\u540E\u7F6E\u5904\u7406\u5668","slug":"beanfactory\u540E\u7F6E\u5904\u7406\u5668","link":"#beanfactory\u540E\u7F6E\u5904\u7406\u5668","children":[]},{"level":2,"title":"@Bean \u7684\u89E3\u6790\u5904\u7406","slug":"bean-\u7684\u89E3\u6790\u5904\u7406","link":"#bean-\u7684\u89E3\u6790\u5904\u7406","children":[]},{"level":2,"title":"@MapperScannerConfigurer","slug":"mapperscannerconfigurer","link":"#mapperscannerconfigurer","children":[]}],"relativePath":"study/framework/spring\u7B2C3\u8BB2.md","lastUpdated":1680763907000}'),p={name:"study/framework/spring\u7B2C3\u8BB2.md"},o=l(`<h1 id="spring-\u7B2C\u4E09\u8BB2-beanfactory-\u540E\u7F6E\u5904\u7406\u5668" tabindex="-1">Spring \u7B2C\u4E09\u8BB2 BeanFactory \u540E\u7F6E\u5904\u7406\u5668 <a class="header-anchor" href="#spring-\u7B2C\u4E09\u8BB2-beanfactory-\u540E\u7F6E\u5904\u7406\u5668" aria-hidden="true">#</a></h1><nav class="table-of-contents"><ul><li><a href="#beanfactory\u540E\u7F6E\u5904\u7406\u5668">BeanFactory\u540E\u7F6E\u5904\u7406\u5668</a></li><li><a href="#bean-\u7684\u89E3\u6790\u5904\u7406">@Bean \u7684\u89E3\u6790\u5904\u7406</a></li><li><a href="#mapperscannerconfigurer">@MapperScannerConfigurer</a></li></ul></nav><p>pom.xml \u51C6\u5907</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">project</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://maven.apache.org/POM/4.0.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">schemaLocation</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">modelVersion</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">4.0.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">modelVersion</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">parent</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter-parent</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.5.5</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">relativePath</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">parent</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.laoshiren</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-bean-init</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">1.0-SNAPSHOT</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">properties</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">maven.compiler.source</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">maven.compiler.source</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">maven.compiler.target</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">maven.compiler.target</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">properties</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.projectlombok</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">lombok</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">project</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="beanfactory\u540E\u7F6E\u5904\u7406\u5668" tabindex="-1">BeanFactory\u540E\u7F6E\u5904\u7406\u5668 <a class="header-anchor" href="#beanfactory\u540E\u7F6E\u5904\u7406\u5668" aria-hidden="true">#</a></h2><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyBeanFactoryPostProcessor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">GenericApplicationContext</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GenericApplicationContext</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBean</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u9700\u8981\u6DFB\u52A0BeanFactory\u540E\u7F6E\u5904\u7406\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">        ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBean</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ConfigurationClassPostProcessor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u626B\u63CF@ComponentScan @Bean @Import @ImportResource</span></span>
<span class="line"><span style="color:#A6ACCD;">        ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">refresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> beanDefinitionName </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinitionNames</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\t</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> beanDefinitionName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>BeanFactoryPostProcessor \u662F\u5982\u4F55\u5DE5\u4F5C\u7684\uFF1F\u9996\u5148\u6211\u4EEC\u90FD\u77E5\u9053Spring \u91CC\u5927\u6982\u6D41\u7A0B\u5C31\u662F\uFF1A</p><ol><li>\u544A\u8BC9ApplicationContext \u8D44\u6E90\u4F4D\u7F6E</li><li>\u628A\u8D44\u6E90\u52A0\u8F7D\u5230BeanFactory \u91CC</li><li>ApplicationContext \u628ABeanFactoryPostProcessor \u6CE8\u518C\u5230BeanFactory \u4E2D</li><li>BeanFactoryPostProcessor \u6267\u884C\u5BF9\u5E94\u7684\u64CD\u4F5C\u5C06Bean \u52A0\u8F7D\u5230BeanFactory</li><li>\u5B9E\u4F8B\u5316Bean</li><li>BeanPostProcessor \u505A\u540E\u7EED\u7684\u64CD\u4F5C\u3002</li></ol><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AbstractApplicationContext</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">refresh</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u4E0A\u9762\u7701\u7565</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// Allows post-processing of the bean factory in context subclasses.</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#82AAFF;">postProcessBeanFactory</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#C792EA;">StartupStep</span><span style="color:#A6ACCD;"> beanPostProcess </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">applicationStartup</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">spring.context.beans.post-process</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;">// Invoke factory processors registered as beans in the context.</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#82AAFF;">invokeBeanFactoryPostProcessors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u4E0B\u9762\u4E5F\u7701\u7565</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>refresh()</code>\u65B9\u6CD5\u4E2D\u628ABeanFactory \u540E\u7F6E\u5904\u7406\u5668\u6CE8\u518C\u5230BeanFactory \u7136\u540E\u8C03\u7528\u4E86\u4ED6\u7684\u65B9\u6CD5\u5C06Bean \u52A0\u8F7D\u5230\u5BB9\u5668\u4E2D\u3002</p><p><img src="https://pic.imgdb.cn/item/63c81df8be43e0d30e265ecf.png" alt=""></p><p>\u90A3\u5E94\u8BE5\u5982\u4F55\u6CE8\u518C\u5462</p><p>\u6211\u4EEC\u4EE5ComponentScan \u4E3A\u4F8B\uFF0C\u7B80\u5355\u8FD8\u539F\u4E00\u4E0B</p><ol><li>\u770B\u4ED6\u7684basePackages</li><li>\u627E\u5230\u5BF9\u5E94\u7684resource</li><li>\u770B\u770B\u5E26\u4E0D\u5E26Component \u6CE8\u89E3</li><li>\u6CE8\u518C\u5BF9\u5E94\u7684BeanDefinition</li></ol><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MockAnnotationBeanFactoryPostProcessor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">GenericApplicationContext</span><span style="color:#A6ACCD;"> context </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GenericApplicationContext</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBean</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DefaultListableBeanFactory</span><span style="color:#A6ACCD;"> defaultListableBeanFactory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">          context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDefaultListableBeanFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u67E5\u627E\u662F\u5426\u5B58\u5728 ComponentScan \u6CE8\u89E3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ComponentScan</span><span style="color:#A6ACCD;"> componentScan </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">                AnnotationUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">findAnnotation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ComponentScan</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">componentScan</span><span style="color:#89DDFF;">!=null)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> basePackage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> componentScan</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basePackages</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">basePackage</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">              	</span><span style="color:#676E95;">// \u6700\u7EC8\u662F\u4EE5\u5B57\u8282\u7801\u7684\u65B9\u5F0F\u627E</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> filePath </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">classpath:*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">basePackage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)+</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/**/*.class</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">Resource</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> resources </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getResources</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u6CA1\u6709context \u7684\u60C5\u51B5</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// resources = new PathMatchingResourcePatternResolver().getResources(filePath);</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u8BFB\u53D6\u7C7B\u7684\u5143\u4FE1\u606F\u7684\u5DE5\u5382</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">CachingMetadataReaderFactory</span><span style="color:#A6ACCD;"> metadataReaderFactory </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CachingMetadataReaderFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// bean Name \u751F\u5B58\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">AnnotationBeanNameGenerator</span><span style="color:#A6ACCD;"> beanNameGenerator </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AnnotationBeanNameGenerator</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Resource</span><span style="color:#A6ACCD;"> resource </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> resources</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resource</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u8BFB\u53D6\u7C7B\u7684\u5143\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">MetadataReader</span><span style="color:#A6ACCD;"> metadataReader </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> metadataReaderFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMetadataReader</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resource</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u7C7B\u7684\u5143\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">ClassMetadata</span><span style="color:#A6ACCD;"> classMetadata </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> metadataReader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClassMetadata</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u6CE8\u89E3\u5143\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">AnnotationMetadata</span><span style="color:#A6ACCD;"> annotationMetadata </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> metadataReader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAnnotationMetadata</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u65E0\u6CD5\u83B7\u53D6\u5230\u4ED6\u7684\u6D3E\u751F\u6CE8\u89E3 \u6BD4\u5982@Controller @Service</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> hasComponentAnnotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotationMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasAnnotation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Component</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u83B7\u53D6\u6D3E\u751F\u6CE8\u89E3</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> hasMetaComponentAnnotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotationMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasMetaAnnotation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Component</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#89DDFF;">										</span><span style="color:#676E95;">// \u5982\u679C\u662F Component\u6CE8\u89E3 \u6216\u8005\u662F\u6D3E\u751F\u7684\u6CE8\u89E3</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">hasComponentAnnotation </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> hasMetaComponentAnnotation</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#C792EA;">AbstractBeanDefinition</span><span style="color:#A6ACCD;"> beanDefinition </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">BeanDefinitionBuilder</span></span>
<span class="line"><span style="color:#A6ACCD;">                                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">genericBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">classMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClassName</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinition</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;">// Bean name </span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> beanName </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">                                beanNameGenerator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">generateBeanName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanDefinition</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> defaultListableBeanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                      	</span><span style="color:#676E95;">// \u6CE8\u518CBean</span></span>
<span class="line"><span style="color:#A6ACCD;">                        defaultListableBeanFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> beanDefinition</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">refresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> beanDefinitionName </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinitionNames</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanDefinitionName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="bean-\u7684\u89E3\u6790\u5904\u7406" tabindex="-1">@Bean \u7684\u89E3\u6790\u5904\u7406 <a class="header-anchor" href="#bean-\u7684\u89E3\u6790\u5904\u7406" aria-hidden="true">#</a></h2><p>\u5982\u4F55\u89E3\u6790Configuration \u4FEE\u9970\u7684\u7C7B\u91CC\u7684 @Bean \u6CE8\u89E3\u4FEE\u9970\u65B9\u6CD5\u3002</p><ol><li>\u627E\u5230\u7C7B</li><li>\u627E\u5230\u65B9\u6CD5</li><li>\u8F6C\u6362\u6210BeanDefinition</li><li>\u52A0\u8F7D\u5230BeanFactory</li></ol><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MockAnnotationConfigurationBeanFactoryPostProcessor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">GenericApplicationContext</span><span style="color:#A6ACCD;"> context </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GenericApplicationContext</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBean</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DefaultListableBeanFactory</span><span style="color:#A6ACCD;"> beanFactory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDefaultListableBeanFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">CachingMetadataReaderFactory</span><span style="color:#A6ACCD;"> metadataReaderFactory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CachingMetadataReaderFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">MetadataReader</span><span style="color:#A6ACCD;"> metadataReader </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">                metadataReaderFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMetadataReader</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ClassPathResource</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com/laoshiren/app/bean/Config.class</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u83B7\u53D6\u6CE8\u89E3\u5143\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">AnnotationMetadata</span><span style="color:#A6ACCD;"> annotationMetadata </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> metadataReader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAnnotationMetadata</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u83B7\u53D6\u88AB\u6CE8\u89E3\u6807\u6CE8\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Set</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">MethodMetadata</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> annotatedMethods </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotationMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAnnotatedMethods</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Bean</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">MethodMetadata</span><span style="color:#A6ACCD;"> annotatedMethod </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> annotatedMethods</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">annotatedMethod</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u521B\u5EFABeanDefinition</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">BeanDefinitionBuilder</span><span style="color:#A6ACCD;"> beanDefinitionBuilder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> BeanDefinitionBuilder</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">genericBeanDefinition</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u6CA1\u641E\u61C2\u5982\u4F55\u62FF\u5230 config</span></span>
<span class="line"><span style="color:#89DDFF;">          	</span><span style="color:#676E95;">// \u7B2C\u4E00\u4E2A\u53C2\u6570\u8868\u793A\u90A3\u4E9B\u88AB@Bean\u4FEE\u9970\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#89DDFF;">          	</span><span style="color:#676E95;">// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u9700\u8981FactoryBean \u90A3\u8C01\u662F\u4ED6\u7684factoryBean \u5462 \u8FD9\u4E2ABean \u88AB\u8C01\u521B\u5EFA\u5462</span></span>
<span class="line"><span style="color:#A6ACCD;">            beanDefinitionBuilder</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setFactoryMethodOnBean</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">annotatedMethod</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMethodName</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#676E95;">// \u6709\u53C2\u6570\u7684\u65B9\u6CD5\u9700\u8981\u6307\u5B9A\u88C5\u914D\u6A21\u5F0F \u9ED8\u8BA4\u662FNo </span></span>
<span class="line"><span style="color:#89DDFF;">              			</span><span style="color:#676E95;">//\u5728\u5BF9\u4E8E\u6784\u9020\u65B9\u6CD5\u7684\u53C2\u6570\u548C\u5DE5\u5382\u65B9\u6CD5\u7684\u53C2\u6570\u90FD\u662FCONSTRUCTOR</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAutowireMode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AbstractBeanDefinition</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AUTOWIRE_CONSTRUCTOR</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u521D\u59CB\u5316\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> initMethod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotatedMethod</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAnnotationAttributes</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Bean</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">()).</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">initMethod</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">StringUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasText</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">initMethod</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                beanDefinitionBuilder</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setInitMethodName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">initMethod</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u540C\u6837\u8FD8\u6709\u9500\u6BC1\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// beanDefinitionBuilder.setDestroyMethodName(&quot;&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">AbstractBeanDefinition</span><span style="color:#A6ACCD;"> beanDefinition </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> beanDefinitionBuilder</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinition</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u65B9\u6CD5\u540D\u5B57\u4F5C\u4E3Abean Name</span></span>
<span class="line"><span style="color:#A6ACCD;">            beanFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">annotatedMethod</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMethodName</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> beanDefinition</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">refresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> beanDefinitionName </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinitionNames</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanDefinitionName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="mapperscannerconfigurer" tabindex="-1">@MapperScannerConfigurer <a class="header-anchor" href="#mapperscannerconfigurer" aria-hidden="true">#</a></h2><p>\u4EE5\u540E\u81EA\u5DF1\u5B9E\u73B0\u7684<code>BeanFactoryPostProcessor</code>\u90FD\u53EF\u4EE5\u76F4\u63A5\u5B9E\u73B0 <code>BeanDefinitionRegistryPostProcessor</code>\uFF0C\u8FD9\u6837\u5C31\u4E0D\u7528\u4E3A\u4E86ConfigurableListableBeanFactory \u65E0\u6CD5\u76F4\u63A5\u6CE8\u518CBeanDefinition \u800C\u5F3A\u8F6C\u4E86\u3002</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MapperBeanPostProcessor</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BeanDefinitionRegistryPostProcessor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">postProcessBeanDefinitionRegistry</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">BeanDefinitionRegistry</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">registry</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">BeansException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u627E\u6CE8\u89E3\u7701\u7565</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u627E\u5305\u7701\u7565</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u627E mapper</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">PathMatchingResourcePatternResolver</span><span style="color:#A6ACCD;"> patternResolver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PathMatchingResourcePatternResolver</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Resource</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> resources </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> patternResolver</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getResources</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">classpath:com/laoshiren/app/mapper/mapper/**/*.class</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// \u8BFB\u53D6\u5143\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">CachingMetadataReaderFactory</span><span style="color:#A6ACCD;"> readerFactory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CachingMetadataReaderFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">AnnotationBeanNameGenerator</span><span style="color:#A6ACCD;"> beanNameGenerator </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AnnotationBeanNameGenerator</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Resource</span><span style="color:#A6ACCD;"> resource </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> resources</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">MetadataReader</span><span style="color:#A6ACCD;"> metadataReader </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> readerFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMetadataReader</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resource</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u7C7B\u5C5E\u6027</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">ClassMetadata</span><span style="color:#A6ACCD;"> classMetadata </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> metadataReader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClassMetadata</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u4E0D\u662F\u63A5\u53E3\u5C31\u8DF3\u8FC7</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#A6ACCD;">classMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isInterface</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">continue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">       </span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u6CA1\u6709@Mapper \u6CE8\u89E3\u5C31\u8DF3\u8FC7</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> hasMapper </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotationMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasAnnotation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Mapper</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#A6ACCD;">hasMapper</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">continue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u51C6\u5907\u751F\u6210MapperFactoryBean</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">AbstractBeanDefinition</span><span style="color:#A6ACCD;"> beanDefinition </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">BeanDefinitionBuilder</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">genericBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MapperFactoryBean</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;">// \u6DFB\u52A0\u6784\u9020\u65B9\u6CD5\u7684\u503C</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addConstructorArgValue</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">classMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClassName</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;">// \u81EA\u52A8\u88C5\u914D \u53BB\u88C5SqlSessionFactory</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAutowireMode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AbstractBeanDefinition</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AUTOWIRE_BY_TYPE</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinition</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u9700\u8981\u7528\u5404\u81EA\u7684FactoryBean \u91CC\u5B9E\u73B0\u7684\u7C7B\u7684\u540D\u5B57</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">AbstractBeanDefinition</span><span style="color:#A6ACCD;"> beanNameDefinition </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">BeanDefinitionBuilder</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">genericBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">classMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClassName</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBeanDefinition</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u66F4\u5177beanNameDefinition \u521B\u5EFABeanName</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> beanName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> beanNameGenerator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">generateBeanName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanNameDefinition</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> registry</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u76F4\u63A5\u6CE8\u518CbeanDefinition \u4F1A\u5BFC\u81F4\u540E\u6CE8\u518C\u4E0A\u6765\u7684BeanName \u4E0E\u524D\u9762\u7684\u4E00\u81F4\u800C\u8986\u76D6\uFF08\u56E0\u4E3A\u90FD\u662FMapperFactoryBean\uFF09</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u6240\u4EE5\u9700\u8981\u91CD\u65B0\u6CE8\u518C\u4E00\u4E2ABean \u5C31\u7528mapper\u672C\u8EAB\u4F5C\u4E3Aname\u53BB\u6CE8\u518C\u9632\u6B62\u8986\u76D6</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u6CE8\u518C\u5230beanFactory</span></span>
<span class="line"><span style="color:#A6ACCD;">                registry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerBeanDefinition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> beanDefinition</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">BeanCreationException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMessage</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">postProcessBeanFactory</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ConfigurableListableBeanFactory</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">configurableListableBeanFactory</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">BeansException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div>`,22),e=[o];function r(t,c,D,F,y,A){return n(),a("div",null,e)}const b=s(p,[["render",r]]);export{i as __pageData,b as default};
